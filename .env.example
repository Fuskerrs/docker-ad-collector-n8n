# ============================================================
# AD COLLECTOR FOR N8N - Configuration
# Version 1.0.0
# ============================================================

# ==================== REQUIRED SETTINGS ====================

# Active Directory LDAP URL
# Format: ldaps://your-dc-hostname:636 (LDAPS recommended)
# or: ldap://your-dc-hostname:389 (Not recommended for production)
LDAP_URL=ldaps://dc.example.com:636

# Active Directory Base DN
# Example: DC=example,DC=com
LDAP_BASE_DN=DC=example,DC=com

# Bind DN (Service Account)
# This account needs read/write permissions on AD
# Example: CN=n8n,CN=Users,DC=example,DC=com
LDAP_BIND_DN=CN=service-account,CN=Users,DC=example,DC=com

# Bind Password (Service Account Password)
# REQUIRED - This must be set!
LDAP_BIND_PASSWORD=YourSecurePasswordHere

# ==================== OPTIONAL SETTINGS ====================

# Port for AD Collector API
# Default: 8443
PORT=8443

# SSL/TLS Certificate Verification
# Set to "true" to verify SSL certificates (recommended for production)
# Set to "false" to skip verification (useful for self-signed certs)
# Default: false
LDAP_TLS_VERIFY=false

# JWT Secret for API Token Generation
# If not set, a random secret will be generated on each start
# Set this to a fixed value if you want the same token across restarts
# JWT_SECRET=your-very-long-random-secret-here

# API Token (Optional)
# If not set, a new token will be generated on each start
# You can set a fixed token here for consistency
# API_TOKEN=your-fixed-token-here

# Token Expiry
# Default: 365d (365 days)
# Examples: 30d, 12h, 7d
TOKEN_EXPIRY=365d

# ==================== CERTIFICATE SETTINGS ====================

# If you have a custom AD Root CA certificate, place it in:
# ./certs/ad-root-ca.pem
#
# The certificate will be automatically loaded if the file exists
# and LDAP_TLS_VERIFY is set to "false"

# ============================================================
# EXAMPLE CONFIGURATIONS
# ============================================================

# Example 1: Basic Setup with Self-Signed Certificate
# LDAP_URL=ldaps://dc01.company.local:636
# LDAP_BASE_DN=DC=company,DC=local
# LDAP_BIND_DN=CN=n8n,CN=Users,DC=company,DC=local
# LDAP_BIND_PASSWORD=MySecurePassword123!
# LDAP_TLS_VERIFY=false

# Example 2: Production Setup with Verified Certificate
# LDAP_URL=ldaps://dc01.company.com:636
# LDAP_BASE_DN=DC=company,DC=com
# LDAP_BIND_DN=CN=n8n-service,OU=Service Accounts,DC=company,DC=com
# LDAP_BIND_PASSWORD=ProductionPassword456!
# LDAP_TLS_VERIFY=true
# JWT_SECRET=very-long-random-secret-string-here-min-64-chars
# TOKEN_EXPIRY=90d

# ============================================================
# NOTES
# ============================================================
#
# 1. Always use LDAPS (port 636) instead of LDAP (port 389)
#    for encrypted communication
#
# 2. The service account (LDAP_BIND_DN) must have at least:
#    - Read permissions on all user/group objects
#    - Write permissions to create/modify/delete users and groups
#
# 3. For self-signed certificates, set LDAP_TLS_VERIFY=false
#    and optionally place your AD root CA in ./certs/ad-root-ca.pem
#
# 4. Keep this file secure and never commit it to version control
#
# 5. Copy this file to .env and fill in your values:
#    cp .env.example .env
#
# ============================================================
